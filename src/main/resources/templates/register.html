<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Keyboard - Main Page</title>

    <!-- Bootstrap -->
    <link href="https://www.bootcss.com/p/layoutit/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="https://www.bootcss.com/p/layoutit/css/layoutit.css" rel="stylesheet">
    <script type="text/javascript" src="https://www.bootcss.com/p/layoutit/js/jquery-2.0.0.min.js"></script>
    <script type="text/javascript" src="https://www.bootcss.com/p/layoutit/js/bootstrap.min.js"></script>



</head>

<body class="text-center">

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span9" style="border:dotted 2px black">
            <form class="form-horizontal" th:action="@{/user/reg}" method="post">
                <img class="mb-4" th:src="@{/img/KEYBOARD.png}" alt="" width="300" height="100">
                <h3 class="h3 mb-3 font-weight-normal">Please register</h3>

                <p style="color: red" th:text="${msg2}" th:if="${!#strings.isEmpty(msg2)}"> </p>
                <div>
                    <label class="sr-only">Username</label>
                    <input type="text" name="username" id="username" class="form-control" placeholder="Username" required="" autofocus="" onkeyup="checkUsername()">
                </div>
                <div>
                    <label class="sr-only">Password</label>
                    <input type="password" name="password" class="form-control" placeholder="Password" required="">
                </div>
                <div>
                    <label class="sr-only">Email</label>
                    <input type="text" name="email" id="email" class="form-control" placeholder="Email" required="" onkeyup="">
                </div>



                    <div>
                        <p></p>
                        <a class="btn btn-danger" href="/login">Back</a>
                        <button type="submit" class="btn btn-primary">Register</button>
                    </div>

            </form>
        </div>
        <div class="span3">
        </div>
    </div>
</div>

<script type="text/javascript" th:inline="javascript">


    function checkUsername() {
        var currentUsername = $(document.getElementById("username")).val();
        console.log(currentUsername);

        $.ajax({
        	url: "/user/checkUsername",
        	type: "post",
            async: false,
        	data: {
        		"username": currentUsername
        	},
            success: function(data){
        	    alert("success");
            },
            error: function(data){
        	  alert("error");
            },
            complete: function (data) {
        	    //var checkFlag = [[${checkUsername}]];
        	    console.log(data);
            }
        });



    }
</script>


</body>

</html>